# 지능형 안전정보 시스템 (스마트 안전 파트너) - PRD
**Product Requirements Document**

---

## 1. 제품 개요

### 1.1 제품명
**지능형 안전정보 시스템 (스마트 안전 파트너)**
- 영문명: Industrial Equipment Safety Management System

### 1.2 제품 비전
산업현장의 안전사고를 예방하고 작업자의 안전을 보장하는 AI 기반 종합 안전관리 플랫폼

### 1.3 제품 목적
- 산업설비 작업 시 발생할 수 있는 안전사고 예방
- 실시간 AI 분석을 통한 맞춤형 안전 브리핑 제공
- 과거 사고사례와 안전교육자료를 활용한 종합적 위험성 평가
- 작업자 중심의 직관적이고 실용적인 안전관리 도구 제공

---

## 2. 핵심 기능 명세

### 2.1 설비 관리 시스템
**기능 설명**: 산업설비에 대한 종합적 정보 관리 및 위험도 평가

**주요 특징**:
- QR 코드 기반 설비 식별 시스템
- 설비별 상세 위험 요소 분류 (고전압, 고압가스, 고온, 고소, 중량물)
- AI 기반 설비 위험도 자동 평가 (HIGH/MEDIUM/LOW)
- 설비별 필수 안전장비 및 작업도구 관리
- 동적 안전시설 위치 관리 (소화기, AED, 응급처치함, 비상구)

**데이터 구조**:
- 설비 기본정보: 명칭, 코드, 위치, 제조사, 설치연도
- 위험 요소: 고전압, 고압, 고온, 고소, 기계적 위험
- 안전 요구사항: 필수 보호구, 안전장비, 작업도구
- 안전시설 정보: 시설 유형별 위치 및 상태 관리

### 2.2 작업 유형 관리
**기능 설명**: 설비별 작업 유형 정의 및 절차 관리

**주요 특징**:
- 설비별 맞춤형 작업 유형 분류 (점검, 정비, 청소, 교체 등)
- 작업별 상세 절차 및 체크리스트 관리
- 예상 소요시간 및 위험도 평가
- 작업 이력 추적 및 관리

### 2.3 AI 기반 안전 브리핑 시스템
**기능 설명**: 실시간 환경정보와 RAG 기술을 활용한 종합적 안전 브리핑 생성

**핵심 구성요소**:

#### 2.3.1 RAG (Retrieval-Augmented Generation) 시스템
- **데이터 소스**: 8,661개 안전 관련 문서
  - 사고사례: 1,793건 (실제 산업재해 사례)
  - 교육자료: 6,503건 (KOSHA 포털 연계)
  - 안전규정: 367건 (산업안전보건법 관련 규정)
- **벡터 데이터베이스**: Vectra 기반 의미론적 검색
- **성능**: 315-525ms 응답시간, 하이브리드 스코어링으로 정확도 향상
- **프로파일 기반 키워드 가중치**: 전기설비 특화 키워드 시스템 (170kV GIS 관련)

#### 2.3.2 실시간 환경정보 연계
- **스마트 날씨 서비스**: OpenWeatherMap API 연동
- **시간 지원**: 과거(Historical API), 현재, 미래(7일 예보) 날씨 데이터
- **환경적 위험요소**: 기상조건에 따른 추가 안전 고려사항
- **맞춤형 경고**: 날씨별 특별 안전수칙 제시

#### 2.3.3 종합 위험성 평가
- **정량적 위험평가**: 발생가능성 × 심각도 기반 점수 산정
- **위험요소 분류**: 물리적, 화학적, 인간공학적 위험 종합 분석
- **AI 기반 위험도 산정**: Gemini 2.5 Flash 모델 활용

#### 2.3.4 브리핑 구성요소
1. **작업 요약**: 설비정보, 작업내용, 소요시간, 주요 위험요소
2. **위험성 평가**: 정량적 위험점수, 위험요소별 상세 분석
3. **필수 도구/보호구**: AI 추천 + 설비별 필수 장비
4. **안전 규정**: 관련 법령 및 규정 자동 검색/요약
5. **관련 사고사례**: 유사 사고사례 검색 및 교훈
6. **교육자료**: KOSHA 연계 안전교육 자료 제공
7. **안전 퀴즈**: 3문항 안전지식 확인 퀴즈
8. **안전 슬로건**: 작업별 맞춤형 안전 구호

### 2.4 설비 매뉴얼 챗봇 시스템
**기능 설명**: AI 기반 설비 매뉴얼 질의응답 시스템

**주요 특징**:
- **하이브리드 검색 시스템**: 스파스(BM25/MiniSearch) + 덴스(벡터) 검색 결합
- **질의 확장 기능**: 안전장치 관련 한국어/영어 동의어 자동 확장 (31개 확장 쿼리)
- **매뉴얼 데이터**: 5개 PDF 매뉴얼 처리, 666개 임베딩
  - 1호기 매뉴얼, 2호기 매뉴얼, 2호기 조속기
  - 170kV GIS 취급설명서, 수차발전기 대점검 순서도
- **설비별 필터링**: 4개 패밀리 지원 (1수력 1호기, 1수력 2호기, 변전설비, 1수력 공통)
- **참고매뉴얼 UI**: 접기/펼치기 기능으로 화면 공간 최적화
- **컨텍스트 기반 응답**: 설비별 특화된 안전 가이드 제공

**기술 구성**:
- **AI 모델**: OpenAI GPT-4o (매뉴얼 Q&A 생성)
- **검색 성능**: RRF(Reciprocal Rank Fusion) 스코어 융합
- **안전 가중치**: 안전/위험 태그 콘텐츠 우선 순위 부여 (+0.2 boost)

### 2.5 작업 세션 관리
**기능 설명**: 실제 작업 진행 과정 모니터링 및 관리

**주요 특징**:
- 작업 시작/종료 시간 추적
- 단계별 안전 체크리스트 확인
- 실시간 안전상태 모니터링
- 작업 완료 후 피드백 수집

### 2.6 공지사항 관리 시스템
**기능 설명**: 안전 관련 공지사항 및 알림 관리

**주요 특징**:
- 관리자 공지사항 작성/편집/삭제 기능
- 우선순위별 공지사항 관리
- 순차적 페이드인 효과로 사용자 주의 집중
- 활성 공지사항 최적화 표시

### 2.7 사고 보고 시스템
**기능 설명**: 안전사고 발생 시 즉시 보고 및 대응 체계

**주요 특징**:
- 간편한 사고 보고 인터페이스
- 사고 유형별 분류 및 심각도 평가
- 즉시 대응 가이드라인 제시
- 사고 이력 데이터베이스 구축

---

## 3. 기술 아키텍처

### 3.1 프론트엔드
- **프레임워크**: React 18 + TypeScript
- **라우팅**: Wouter
- **상태관리**: TanStack Query (React Query)
- **UI 라이브러리**: shadcn/ui (Radix UI 기반)
- **스타일링**: Tailwind CSS + 안전 테마 색상 시스템
- **빌드도구**: Vite
- **설계원칙**: Mobile-first 반응형 디자인, 한국어 폰트 지원

### 3.2 백엔드
- **런타임**: Node.js + Express.js
- **언어**: TypeScript
- **데이터베이스**: PostgreSQL (Neon Serverless)
- **ORM**: Drizzle ORM + Drizzle Kit
- **세션관리**: Express Session + PostgreSQL 저장

### 3.3 AI 및 데이터 처리
- **AI 모델**: 
  - OpenAI GPT-4o (임베딩 생성, 매뉴얼 Q&A)
  - Google Gemini 2.5 Flash (안전 분석 및 브리핑 생성)
- **벡터 데이터베이스**: Vectra (로컬 벡터 인덱스)
- **RAG 시스템**: 하이브리드 검색 (벡터 유사도 + 키워드 매칭)
- **검색 엔진**: MiniSearch (BM25 알고리즘)
- **데이터 보호**: 자동 백업 시스템 (100개 문서마다 체크포인트 생성)

### 3.4 외부 서비스 연동
- **날씨 서비스**: OpenWeatherMap API (Current, Historical, One Call API 3.0)
- **교육자료**: KOSHA(한국산업안전보건공단) 포털 연계
- **QR 코드**: ZXing 라이브러리 활용

---

## 4. 사용자 경험 (UX) 설계

### 4.1 사용자 여정 (User Journey)
1. **설비 접근**: QR 코드 스캔으로 설비 식별
2. **작업 선택**: 수행할 작업 유형 선택
3. **안전 브리핑**: AI 생성 맞춤형 안전 브리핑 확인
4. **매뉴얼 상담**: 설비 매뉴얼 챗봇을 통한 기술적 질의응답
5. **퀴즈 응답**: 안전지식 확인 퀴즈 수행
6. **작업 시작**: 안전 체크리스트 확인 후 작업 개시
7. **작업 진행**: 단계별 안전수칙 준수
8. **작업 완료**: 완료 보고 및 피드백 제출

### 4.2 UI/UX 원칙
- **직관성**: 산업현장 작업자도 쉽게 사용할 수 있는 간단한 인터페이스
- **안전성**: 중요한 안전정보는 강조 표시 및 반복 확인
- **모바일 최적화**: 작업현장에서 사용하는 모바일 기기에 최적화
- **접근성**: 다양한 작업환경에서도 명확하게 인식 가능한 디자인
- **한국어 지원**: 한국 산업현장 특화 한국어 인터페이스

### 4.3 혁신적 UX 요소
- **참고매뉴얼 접기/펼치기**: 화면 공간 효율적 활용
- **순차적 페이드인**: 공지사항 시각적 강조
- **위치 기반 배지**: 설비 위치 정보 직관적 표시
- **안전 테마 색상**: 위험도별 시각적 구분

---

## 5. 성능 및 품질 요구사항

### 5.1 성능 지표
- **안전 브리핑 생성 시간**: 30초 이내
- **벡터 검색 응답시간**: 500ms 이내
- **매뉴얼 챗봇 응답시간**: 5-6초 이내
- **하이브리드 검색 성능**: 스파스 10개 + 덴스 10개 → 최종 5개 결과
- **질의 확장**: 최대 31개 확장 쿼리 처리
- **RAG 데이터 정확도**: 관련 자료 5건 이상 검색 보장
- **시스템 가용성**: 99.5% 이상

### 5.2 데이터 품질
- **사고사례 데이터**: 실제 산업재해 사례 기반 (1,793건)
- **교육자료**: KOSHA 공식 자료 연계 (6,503건)
- **안전규정**: 최신 산업안전보건법 반영 (367건)
- **매뉴얼 데이터**: 5개 PDF 매뉴얼, 666개 임베딩
- **실시간 날씨**: OpenWeatherMap 실시간/과거/예보 데이터

### 5.3 보안 및 안정성
- **데이터 백업**: 자동 체크포인트 시스템
- **세션 보안**: PostgreSQL 기반 안전한 세션 관리
- **오류 처리**: 포괄적 예외처리 및 오류 복구 메커니즘
- **성능 최적화**: 중복 토큰화 제거, 캐시 활용

---

## 6. 주요 성과 및 혁신점

### 6.1 기술적 혁신
- **하이브리드 RAG 시스템**: 벡터 유사도와 키워드 매칭을 결합한 정밀한 정보 검색
- **질의 확장 엔진**: 안전장치 관련 한국어/영어 동의어 자동 확장 시스템
- **프로파일 기반 검색**: 설비별 특화 키워드 가중치 시스템
- **RRF 스코어 융합**: Reciprocal Rank Fusion으로 검색 정확도 향상
- **실시간 환경 연동**: 시간별 날씨 정보 연계한 동적 안전 평가
- **AI 기반 위험성 평가**: 정량적이고 객관적인 위험도 산정
- **다중 AI 모델 활용**: 각 모델의 장점을 활용한 최적화된 안전 분석

### 6.2 사용성 개선
- **한국어 기반 로깅**: 성능 분석을 위한 한국어 타이밍 분석 시스템
- **모바일 최적화**: 산업현장 환경에 특화된 모바일 UX
- **직관적 워크플로**: QR 스캔부터 작업 완료까지 단순하고 명확한 절차
- **접기/펼치기 UI**: 참고매뉴얼 섹션 공간 효율적 활용
- **설비별 필터링**: 매뉴얼 챗봇 4개 패밀리 지원

### 6.3 안전성 향상
- **종합적 위험 평가**: 다차원적 위험 요소 분석
- **실제 사고사례 활용**: 과거 경험을 통한 예방적 안전 관리
- **맞춤형 안전 교육**: 작업별, 설비별 특화된 안전 정보 제공
- **실시간 매뉴얼 지원**: AI 기반 즉시 기술 지원 시스템

---

## 7. 향후 로드맵

### 7.1 단기 개선사항 (1-3개월)
- [ ] 오프라인 모드 지원 (PWA 완성)
- [ ] 음성 안내 기능 추가
- [ ] 사고 보고서 자동 생성 기능
- [ ] 안전교육 이력 관리 시스템
- [ ] 매뉴얼 챗봇 음성 인터페이스

### 7.2 중기 확장 계획 (3-6개월)
- [ ] 다국어 지원 (영어, 중국어)
- [ ] IoT 센서 연동 (실시간 환경 모니터링)
- [ ] 증강현실(AR) 기반 안전 가이드
- [ ] 관리자 대시보드 및 분석 리포트
- [ ] 매뉴얼 자동 업데이트 시스템

### 7.3 장기 비전 (6개월+)
- [ ] 머신러닝 기반 사고 예측 모델
- [ ] 업계별 특화 버전 개발
- [ ] 글로벌 안전 표준 준수 (ISO 45001 등)
- [ ] 엔터프라이즈 급 확장성 지원
- [ ] 다중 언어 매뉴얼 지원

---

## 8. 비즈니스 가치

### 8.1 정량적 효과
- **사고 예방**: 포괄적 안전 브리핑으로 사고 위험 감소
- **교육 효율성**: AI 기반 맞춤형 교육으로 학습 효과 극대화
- **작업 효율성**: 체계적인 안전 절차로 작업 품질 향상
- **기술 지원**: 즉시 매뉴얼 검색으로 작업 중단 시간 최소화
- **비용 절감**: 사고 예방을 통한 직간접 비용 절약

### 8.2 정성적 가치
- **안전 문화 조성**: 데이터 기반 안전 관리 문화 확산
- **작업자 만족도**: 직관적이고 실용적인 안전 도구 제공
- **기술 역량 강화**: AI 기반 실시간 기술 지원 시스템
- **규제 준수**: 산업안전보건법 준수를 통한 법적 리스크 감소
- **기업 이미지**: 첨단 안전관리 시스템으로 기업 신뢰도 향상

---

## 9. 결론

지능형 안전정보 시스템(스마트 안전 파트너)은 AI와 RAG 기술을 활용하여 산업현장의 안전사고를 예방하고 작업자의 안전을 보장하는 혁신적인 솔루션입니다.

실제 사고사례 데이터, 공식 안전교육자료, 최신 안전규정을 종합적으로 활용하여 맞춤형 안전 브리핑을 제공함으로써, 기존의 형식적인 안전 관리를 넘어 실질적이고 효과적인 안전 예방 시스템을 구현했습니다.

특히 설비 매뉴얼 챗봇 시스템의 추가로 작업자들이 실시간으로 기술적 질문에 대한 답변을 받을 수 있게 되어, 안전성과 작업 효율성을 동시에 향상시키는 종합적인 솔루션으로 발전했습니다.

한국 산업현장의 특성을 반영한 한국어 기반 시스템으로 개발되어 국내 제조업체들이 즉시 도입 가능한 실용적인 솔루션으로 완성되었습니다.

---

**문서 버전**: v2.0  
**최종 업데이트**: 2025년 9월 1일  
**작성자**: AI-Powered Safety System Development Team

**주요 업데이트 내용 (v2.0)**:
- 설비 매뉴얼 챗봇 시스템 추가
- 하이브리드 검색 시스템 상세 명세
- 질의 확장 기능 및 성능 지표 업데이트
- 참고매뉴얼 UI 개선사항 반영
- 스마트 날씨 서비스 시간 지원 강화
- 공지사항 관리 시스템 추가
- 안전시설 관리 기능 추가